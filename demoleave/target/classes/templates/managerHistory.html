<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Leave Applications</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
	<link href="/css/style.css" rel="stylesheet">
    <link href="/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <script>
        function confirmCancel() {
            return confirm("Are you sure you want to cancel this application?");
        }
    </script>

</head>
<body>
<nav th:replace="~{layout::navbar}"></nav>

<br/>
<br/>

<table class="table table-striped table-hover table-bordered border-primary-subtle"
	style="font-family: 'Consolas', sans-serif; width:1400px;margin-right: auto;margin-left: auto;margin-top:100px;align-content: center">
    <thead class="table-secondary">
        <tr class="text-center">
            <th>Leave Type</th>
            <th>Reason</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Status</th>
            <th>Submit Date</th>
            <th>Approver ID</th>
            <th>Approver Name</th>
            <th>Approve Date</th>
            <th>Comment</th>
            <th>Operation</th>
        </tr>
    </thead>
    <tbody>
        <!-- Iterate through the list of applications -->
        <tr class="text-center" th:each="leaveApplication : ${leaveApplications}">
            <td th:text="${leaveApplication.leaveType}"></td>
            <td th:text="${leaveApplication.reason}"></td>
            <td th:text="${leaveApplication.startDate}"></td>
            <td th:text="${leaveApplication.endDate}"></td>
            <td th:text="${leaveApplication.status}"></td>
            <td th:text="${leaveApplication.submitDate}"></td>
            <td th:text="${leaveApplication.approverID}"></td>
            <td th:text="${leaveApplication.approverName}"></td>
            <td th:text="${leaveApplication.approveDate}"></td>
            <td th:text="${leaveApplication.comment}"></td>
            <td th:if="${leaveApplication.status=='Approved'}">
                <form th:action="@{'/'+${session.user.jobTitle}+'/'+ ${session.user.id} + '/History/cancel'}" method="post">
                    <input type="hidden" name="applicationId" th:value="${leaveApplication.id}" />
                    <button type="submit" onclick="return confirmCancel()" class="border-0"><i class="bi bi-x-circle"></i></button>
                </form>
            </td>
            <td th:if="${leaveApplication.status=='Applied'}">
                <form th:action="@{'/'+${session.user.jobTitle}+'/'+ ${session.user.id} + '/History/update'}" method="post">
                    <input type="hidden" name="applicationId" th:value="${leaveApplication.id}" />
                    <button type="submit" class="border-0"><i class="bi bi-arrow-up-circle"></i></button>
                </form>
                <hr/>
                <form th:action="@{'/'+${session.user.jobTitle}+'/'+ ${session.user.id} + '/History/cancel'}" method="post">
                    <input type="hidden" name="applicationId" th:value="${leaveApplication.id}" />
                    <button type="submit" onclick="return confirmCancel()" class="border-0"><i class="bi bi-x-circle"></i></button>
                </form>
            </td>
        </tr>
    </tbody>
</table>

</body>
</html>
